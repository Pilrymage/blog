{{ define "main" }}
<main class="review-archive">
  <div class="review-container">
    <header class="review-archive-header">
      <nav class="review-archive-nav">
        <ul>
          {{ $currentPage := . }}
          {{/* Loop through the subsections of "reviews" (e.g., music, game) to create tabs */}}
          {{ range (.Site.GetPage "section" "reviews").Sections }}
            <li>
              <a href="{{ .Permalink }}" class="{{ if eq .Permalink $currentPage.Permalink }}active{{ end }}">
                {{ .Title }}
              </a>
            </li>
          {{ end }}
        </ul>
      </nav>
      {{/* The title is now dynamic, based on the section page's title */}}
      <h1>{{ .Title }}</h1>
    </header>

    <div class="review-grid">
      {{ $paginator := .Paginate .Pages }}
      {{ range $paginator.Pages }}
        {{/* Add a dynamic class based on the media_type front matter */}}
        <article class="review-card">
          <a href="{{ .Permalink }}" class="review-card-link">
            <div>
              <img src="{{ .Params.cover.image | relURL }}" alt="Cover for {{ .Title }}">
            </div>
            <div class="review-card-content">
              {{ if .Params.recommended }}
                <p class="review-card-recommendation">
                  {{ index .Params.recommendation 0 }}
                </p>
              {{ end }}
              <p class="review-card-genre">{{ index .Params.genres 0 }}</p>
              <h2 class="review-card-title">{{ .Title }}</h2>
              <p class="review-card-creator">{{ .Params.creator }}</p>
            </div>
          </a>
        </article>
      {{ end }}
    </div>

    {{ partial "pagination.html" . }}
  </div>
</main>
{{ end }}